# Certificate of Attendance generator

This is a small utility program to generate pretty PDF certificates suitable for events, workshops and conventions held by the OSCT.
If you want to reuse the tool for your own OSC, read the section "Customizing templates, colors and logos" below.

The tool sources the information for each certificate from a CSV file.
Simply create a CSV file with the following columns:
- `name` -> The full name of the participant;
- `issuer` -> The full name of the person that is issuing the certificates;
- `issuer_orcid` -> The ORCiD of the persion that is issuing the certificates;
- `event_name` -> The full name of the event;
- `event_description` -> The (extended) description of the event;
- `certificate_id` -> If available, the unique ID of this certificate;
- `certificate_link` -> If available, the link to an external resource (e.g. a webpage representing the certificate);
- `date` -> The date the event took place. To specify a time, use the `event_description` field;
- `certificate_date` -> The date the certificate was released on;
- `certificate_location` -> The location the certificate was issued at;

Any field can be empty but will result in very wierd certificates, with the exception of the `certificate_id` and `certificate_link` fields, which can be empty (and I mean EMPTY, not with NA) and will be handled correctly.

> [!WARNING]
> The `event_description` field MUST start with a space and NOT end in a dot.
> This is because (as of current implementation) it is injected as-is between the end of the last word of the template and the final dot.

## Installation
To use the tool, install:
- Python: any relatively modern version will do. The script only uses the standard library: no external library is needed.
- The Typst PDF compiler, from either [typst.app](https://typst.app/) or GitHub [typst/typst](https://github.com/typst/typst). You must be able to ivoke it from the command line as `typst`.
- The [Atkinson Hyperlegible Font](https://www.brailleinstitute.org/freefont/).

Once everything is installed, [clone the repository](https://docs.github.com/en/repositories/creating-and-managing-repositories/cloning-a-repository) and set it as your working directory (e.g. `cd generate-certificates`).

The tool is only tested on GNU/Linux.

## Usage
This tool reads the CSV file (see above) and generates one certificate per line, saving them as `{name}_cert.pdf` in the output folder.

> [!WARNING]
> If two attendees have the same name, their certificates will overwrite each-other!

To run the tool:
```bash
./generate_certificates.py ~/path/to/participants.csv ~/path/to/output/dir
```

The tool will generate the PDF files one by one and save them in the output dir, ready to be distributed (although, do double check them!).

## Customizing templates, colors and logos
The template used by the script (`main.typ`) and some of its internal configurations are geared towards the Open Science Community Torino.
You can, however, edit them very easily.
Here's a step-by-step guide:

- Clone the repository (as detailed in the installation);
- Replace the logos in `context/resources` with your own OSC's. Be sure to retain the exact file name ("`Logo_OSC.png`");
- Open the `generate_certificates.py` file and edit the line that says:

        COLORS = ["#b30033", "#007a7d", "#002060"]

  with your own OSC's colors in Hexadecimal format. Any colour picker lets you get these codes.
- Edit the `main.typ` file and change the following:
  - You probably want to change the lines that say

        ... Open Science Community Torino ...

    to whatever your OSC name is.

If you want, you can create an entirely new Typst file and point the tool at it with the `--template` option, but then I suggest you read the 'how it works' section below.

Have fun certifying people!

## Example gallery

These are all (fictitious) certificates generated by the tool, to get a sense of what it can do.

![A gallery of incredibly good-looking certificates]("docs/example_certificates.png")

You may notice that the color, shape and size of the bubbles on the top-left and bottom-right are (somewhat) random.
This is the beauty of automatic generation and content injection, baby!
Now, each participant gets a unique certificate they can show their friends and family.

## For Nerds: How it works
It's really simple, actually.
The tool reads the Typst template file, and then looks for special content placeholder patterns (which are not typst legal) to replace them with the CSV content.

The `REPLACEMENTS` dictionary links these patterns (e.g. `{{issued_to}}`) to the respective CSV column (e.g. `name`).

After all replacements are done, it generates the PDF by calling `typst compile` on the (replaced) template (which should now be typst-legal).
The compile enviroment is copied from the `context` dir, to have images and somesuch available to the compiler.

The cycle repeats with each line in the CSV file, generating a new PDF.

This only works because Typst is very, very fast. Nice!

You should be able to add, remove, or replace these patterns by simply editing the `REPLACEMENTS` dictionary.
Same goes for the template file: it's a normal Typst template with some sections replaced by the placeholder strings, like `{{issued_to}}`.

### Adding randomness
The differences of bubble color and size are thanks to the content-injection process that the tool performs.
If the replacement column in the `REPLACEMENTS` dictionary is a function, it gets called **once per placeholder**, meaning you can get random values assigned to it.

See the code for some examples.

### Unique certificate IDs
To give your certificates unique IDs, I used the Nanopublication network.
It's out of scope to this readme, however.
If interested, feel free to contact me (https://orcid.org/0000-0003-2568-5694).


